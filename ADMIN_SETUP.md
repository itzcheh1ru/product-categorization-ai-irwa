# Admin Product Management Setup

This document explains how to set up and use the admin product management functionality with MongoDB integration and AI-powered categorization.

## Features

✅ **Admin Add Product Page** - Complete form for adding new products
✅ **MongoDB Integration** - Products stored in MongoDB Atlas
✅ **AI-Powered Categorization** - Automatic product analysis and categorization
✅ **Real-time Display** - Categorized products shown in table below form
✅ **Product Management** - Full CRUD operations for products

## Setup Instructions

### 1. Install Dependencies

```bash
# Install MongoDB dependencies
pip install pymongo==4.6.0 motor==3.3.2

# Install all backend dependencies
cd backend
pip install -r requirements.txt
```

### 2. MongoDB Configuration

The system is configured to use MongoDB Atlas with the following connection:
- **URL**: `mongodb+srv://amayagunawardhana6_db_user:LF5Q3uuxenNhWTPY@productdb.d3zxyx0.mongodb.net/`
- **Database**: `ProductDB`
- **Collection**: `products`

### 3. Backend API Setup

Start the FastAPI backend server:

```bash
cd backend
uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

### 4. Frontend Setup

Start the Streamlit frontend:

```bash
cd frontend
streamlit run app.py
```

## Usage

### Accessing Admin Panel

1. Open the Streamlit app in your browser
2. In the sidebar, select "Admin" view
3. Navigate to "Add Product" page

### Adding Products

1. **Fill the Form**:
   - Product Name (required)
   - Product Description (required) - This is analyzed by AI
   - Image URL (optional)

2. **AI Processing**:
   - The system automatically analyzes the product description
   - Extracts attributes like gender, category, color, usage, etc.
   - Uses both AI models and fallback logic for robust categorization

3. **Storage**:
   - Product is stored in MongoDB with all AI-generated attributes
   - Unique ID is assigned automatically

4. **Display**:
   - Categorized product appears in table below the form
   - Shows all AI-generated attributes
   - Displays product image if provided

### Product Attributes Generated by AI

The system automatically categorizes products with:

- **Gender**: Men, Women, Boys, Girls, Unisex
- **Category**: Apparel, Accessories, Footwear, Personal Care
- **Subcategory**: Topwear, Bottomwear, Shoes, Watches, etc.
- **Article Type**: Shirts, Pants, Shoes, Dresses, etc.
- **Color**: Extracted from description
- **Season**: Summer, Winter, All Season
- **Usage**: Casual, Formal, Sports, Party
- **Year**: Current year or extracted from description

## API Endpoints

The backend provides the following endpoints for product management:

### Product Management
- `POST /api/products/add` - Add new product
- `GET /api/products` - Get all products
- `GET /api/products/{product_id}` - Get specific product
- `PUT /api/products/{product_id}` - Update product
- `DELETE /api/products/{product_id}` - Delete product
- `GET /api/products/search` - Search products

### AI Processing
- `POST /api/orchestrator/process` - Process product with AI
- `POST /api/classifier/process` - Category classification
- `POST /api/extractor/process` - Attribute extraction
- `POST /api/tagger/process` - Tag generation

## Database Schema

Products are stored in MongoDB with the following structure:

```json
{
  "_id": "ObjectId",
  "id": "string",
  "productDisplayName": "string",
  "description": "string",
  "gender": "string",
  "masterCategory": "string",
  "subCategory": "string",
  "articleType": "string",
  "baseColour": "string",
  "season": "string",
  "year": "number",
  "usage": "string",
  "link": "string",
  "filename": "string",
  "created_at": "datetime",
  "updated_at": "datetime"
}
```

## Testing

### Test MongoDB Connection

Run the test script to verify MongoDB connectivity:

```bash
python test_mongodb_connection.py
```

### Test API Endpoints

You can test the API endpoints using curl or any API client:

```bash
# Test health endpoint
curl http://localhost:8000/api/health

# Add a test product
curl -X POST "http://localhost:8000/api/products/add" \
  -H "Content-Type: application/json" \
  -d '{
    "productDisplayName": "Test Product",
    "description": "Men blue cotton t-shirt for casual wear",
    "gender": "Men",
    "masterCategory": "Apparel",
    "subCategory": "Topwear",
    "articleType": "Shirts",
    "baseColour": "Blue",
    "season": "All Season",
    "year": 2024,
    "usage": "Casual"
  }'
```

## Troubleshooting

### Common Issues

1. **MongoDB Connection Failed**
   - Check internet connection
   - Verify MongoDB Atlas credentials
   - Ensure IP whitelist includes your IP

2. **AI Processing Failed**
   - Check if backend API is running
   - Verify LLM integration is working
   - Check API endpoint responses

3. **Products Not Displaying**
   - Check if products are being stored in MongoDB
   - Verify session state is working
   - Check browser console for errors

### Debug Mode

Enable debug logging by setting environment variables:

```bash
export LOG_LEVEL=DEBUG
export MONGODB_DEBUG=true
```

## Security Notes

- MongoDB credentials are embedded in the code for demo purposes
- In production, use environment variables for sensitive data
- Implement proper authentication for admin access
- Add input validation and sanitization

## Future Enhancements

- [ ] Bulk product import
- [ ] Product image upload
- [ ] Advanced search and filtering
- [ ] Product analytics dashboard
- [ ] Export/import functionality
- [ ] User authentication and authorization
- [ ] Product approval workflow
